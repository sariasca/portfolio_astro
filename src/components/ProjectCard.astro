---
import type { Project } from '../types';

import IconTech from './IconTech.jsx';
import ProjectCarousel from './ProjectCarousel';

const { project } = Astro.props as {
  project: Project;  
};

---

<div class="project-card group p-2" data-technologies={JSON.stringify(project.technologies)}>
  <div class="aspect-video overflow-hidden rounded-xl mb-4 bg-gray-900">
    <ProjectCarousel 
      images={project.images} 
      client:load
    />
  </div>

  <h3 class="text-xl font-bold text-white mb-2">{project.title}</h3>  
  <p class="text-gray-300 mb-4 line-clamp-3">
    {project.description}
  </p>

  <div class="flex flex-wrap gap-2 mb-4">
    {project.tags.map(tag => (
      <span class="px-3 py-1 bg-gray-800/50 text-gray-300 rounded-full text-sm border border-gray-700">
        {tag}
      </span>
    ))}
  </div>

  <div class="flex gap-3 relative z-20">
    {project.technologies.map(techName => (
      <button 
        class="p-1 text-gray-300 hover:text-[#1EE6B3] hover:scale-110 transition-all bg-gray-900/90 backdrop-blur-md rounded-lg border border-gray-600/70"
        onclick={`toggleFilter('${techName}')`}
        title={techName}
      >
        <IconTech 
          name={techName} 
          size={32}
          className={`text-gray-300 hover:text-[#1EE6B3] ${techName === 'CSS' ? '!text-amber-300' : ''}`}
          client:load
        />
      </button>
    ))}
  </div>

  <div class="mt-4 pt-4 border-t border-gray-700/50">
    {project.link ? (
      <a 
        href={project.link}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-2 px-4 py-2 bg-linear-to-r from-[#1EE6B3] to-[#0d9488] text-gray-900 rounded-lg font-bold hover:shadow-[0_0_20px_rgba(30,230,179,0.5)] transition-all"
      >
        Ver proyecto
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
        </svg>
      </a>
    ) : project.title.includes("Portafolio") || project.tags.includes("Portafolio") ?  (
      <span class="px-4 py-2 bg-gray-800/50 text-gray-400 rounded-lg font-medium">
        Proyecto actual
      </span>
    ) : (
      <span class="px-4 py-2 bg-gray-800/50 text-gray-400 rounded-lg font-medium">Pr√≥ximamente</span>
    )}
  </div>
</div>